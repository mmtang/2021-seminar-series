<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>A Casual Introduction to Data Visualization for the Web</title>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/custom.css" id="theme">
		<link rel="stylesheet" href="scripts/venn-diagram.css">
		<link rel="stylesheet" href="scripts/d3-chart.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="lib/plugin/highlight/night-owl.css" id="highlight-theme">

		<!-- Imports -->
		<script src="https://code.highcharts.com/highcharts.js"></script>
		<script href="https://code.highcharts.com/modules/venn.js"></script>	
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<!-- Slide 1 - Title -->
				<section class="center">
					<div class="intro-top">
						<h3 style="margin-bottom: 20px">A Casual Introduction to <br>Data Visualization for the Web</h3>
						<p><small>Water Data Seminar Series&nbsp;&nbsp;|&nbsp;&nbsp;March 25, 2021</small> 
						</p>
					</div>
					<div class="intro-bottom">
						<p class="author">Michelle Tang</p>
						<p><small>California State Water Resources Control Board<br>
							Office of Information Management and Analysis</small>
						</p>
						<img class="logo" src="././assets/data_center_logo_white_bg.jpg">
					</div>
				</section>

				<!-- Slide 2 - Background -->
				<section class="center">
					<h3>Background</h3>
				</section>

				<!-- Slide 3 - The web as a platform -->
				<section class="left">
					<h3 class="slide-title">The web as a platform</h3>
					<div style="display: flex; flex-direction: row">
						<div style="flex: 1">
							<ul>
								<li>Ubiquitous</li>
								<li>Open standards</li>
								<li>Cross-platform</li>
								<li>Accessibile</li>
								<li>Low barrier to entry</li>
								<!-- https://codepen.io/tigt/post/low-barrier-to-entry-the-most-powerful-characteristic-of-the-web -->
							</ul>
						</div>
						<div style="flex: 2; max-width: 450px; text-align: right">
							<figure>
								<img id="internet-viz" src="assets/opte-project.png" style="margin: 10px 0 0 0">
								<figcaption><a href="https://www.opte.org/" target="_blank">The Opte Project</a></figcaption>
							</figure>
						</div>
					</div>
				</section>

				<!-- Slide 4 - What is web development? -->
				<section>
					<section class="left" data-transition="none">
						<h3 class="slide-title">What is web development?</h3>
						<div style="display: flex; flex-direction: row; justify-content: space-evenly; margin-top: 1.4em;">
							<div style="flex: 1; flex-grow: 1; margin-right: 2.2em; padding: 0.5em; border: 1px solid #fff">
								<h5 style="margin-bottom: 0.6em">Front-end</h5>
								<ul style="font-size: 0.8em">
									<li>HTML</li>
									<li>CSS</li>
									<li>JavaScript</li>
									<li>Accessibility</li>
									<li>User interface design / experience</li>
								</ul>
							</div>
							<div style="flex: 2; flex-grow: 1; padding: 0.5em; border: 1px solid #fff">
								<h5 style="margin-bottom: 0.6em">Back-end</h5>
								<ul style="font-size: 0.8em">
									<li>Server code</li>
									<li>Databases</li>
									<li>System architecture</li>
									<li>Scalability</li>
									<li>Security</li>
									<li>APIs</li>
								</ul>
							</div>
						</div>
					</section>
					<!-- Vertical slide with highlight -->
					<section class="left" data-transition="none">
						<h3 class="slide-title">What is web development?</h3>
						<div style="display: flex; flex-direction: row; justify-content: space-evenly; margin-top: 1.4em;">
							<div style="flex: 1; flex-grow: 1; color: #32edb4; margin-right: 2.2em; padding: 0.5em; border: 1px solid #32edb4">
								<h5 style="color: #32edb4; margin-bottom: 0.6em">Front-end</h5>
								<ul style="font-size: 0.8em">
									<li>HTML</li>
									<li>CSS</li>
									<li>JavaScript</li>
									<li>Accessibility</li>
									<li>User interface design / experience</li>
								</ul>
							</div>
							<div style="flex: 2; flex-grow: 1; padding: 0.5em; border: 1px solid #fff">
								<h5 style="margin-bottom: 0.6em">Back-end</h5>
								<ul style="font-size: 0.8em">
									<li>Server code</li>
									<li>Databases</li>
									<li>System architecture</li>
									<li>Scalability</li>
									<li>Security</li>
									<li>APIs</li>
								</ul>
							</div>
						</div>
					</section>
				</section>

				<!-- Slide 5 - Data science vs. Web development -->
				<section class="center">
					<h3 style="font-size: 1.2em">Data science vs. Web development</h3>
					<div id="venn" styles="max-width: 600px; min-width: 300px"></div>
				</section>

				<!-- Slide 6 - JavaScript Charting Libraries -->
				<section class="left">
					<h3 style="font-size: 1.2em; margin-bottom: 1em">JavaScript Charting Libraries</h3>
					<div style="display: flex; flex-direction: row; justify-content: space-evenly; margin-top: 1.4em;">
						<div style="flex: 1; font-size: 0.7em">
							<h4 style="font-size: 0.9em; margin-bottom: 0.6em">High-level</h4>
							<ul>
								<li>High level of abstraction</li>
								<li>Easy to use</li>
								<li>Less customizable</li>
							</ul>
							<h4 style="font-size: 0.9em; margin-top: 1.2em; margin-bottom: 0.6em">Low-level</h4>
							<ul>
								<li>"Close to the hardware"</li>
								<li>More difficult and time-consuming to use</li>
								<li>Flexible, customizable</li>
							</ul>
						</div>
						<div style="flex: 2; align-self: center; max-width: 600px">
							<figure style="text-align: right;">
								<img style="margin: auto" src="assets/data_viz_abstraction_white.png">
								<a href="https://conlanscientific.com/posts/category/blog/post/use-d3-for-charts-dont-exist-yet/" target="_blank"><figcaption style="text-align: right; margin-top: 0.2em">Conlan Scientific</figcaption></a>
							</figure>
						</div>
					</div>
				</section>

				<!-- Slide 7 - Highcharts Example -->
				<section class="center">
					<a href="https://www.highcharts.com/" target="_blank"><img style="width: 35%; margin: 0" src="assets/highcharts-logo.png" alt="Highcharts"></a>
					<div style="display: flex; flex-direction: column">
						<div style="flex: 1; align-self: center; margin-bottom: 0.5em">
							<div id="highcharts"></div>
						</div>
						<div style="flex: 2; margin-left: 1em">
							<pre><code data-trim data-noescape data-line-numbers>
								drawHGraph = (data, unit) => {
									Highcharts.setOptions({
										lang: {
										  thousandsSep: ','
										}
									});
								
									Highcharts.chart('highcharts', {
										chart: {
											zoomType: 'x',
											width: 700,
											height: 250,
											backgroundColor: 'transparent',
											animation: false
										},
										title: {
											text: ''
										},
										xAxis: { 
											type: 'datetime',
											gridLineColor: '#fff',
											labels: {
												style: {
													color: '#fff',
													fontSize: '14px'
												}
											},
											title: {
												enabled: false
											}
										},
										yAxis: { 
											type: 'linear', 
											lineColor: '#fff',
											lineWidth: 1,
											gridLineColor: 'transparent',
											tickLength: 10,
											tickWidth: 1,
											labels: {
												style: {
													color: '#fff',
													fontSize: '14px'
												},
												format: '{value::,.0f}'
											},
											title: {
												enabled: false
											}
										},
										legend: {
											enabled: false
										},
										plotOptions: {
											area: {
												marker: {
													radius: 6
												}
											}
										},
										series: [{
											type: 'scatter',
											data: data,
											stickyTracking: true,
											color: '#FFC0CB'
										}],
										tooltip: {
											formatter: function() {
												return  '<b>' + Highcharts.dateFormat('%b %e, %Y', new Date(this.x)) +'</b><br/>' + this.y + ' ' + unit;
											}
										},
										credits: {
											enabled: false
										}
									});
								}								
							</code></pre>
						</div>
					</div>
				</section>

				<!-- Slide 8 - D3 Example -->
				<section class="center">
					<a href="https://d3js.org/" target="_blank"><img style="width: 36%; margin: 0.4em 0 0 0" src="assets/d3_logo.png" alt="Data Driven Documents (D3)"></a>
					<div style="display: flex; flex-direction: column">
						<div style="flex: 1">
							<div id="d3-chart"></div>
						</div>
						<div style="flex: 2; margin-left: 1em">
							<pre><code data-trim data-noescape data-line-numbers>
								drawGraph = (data) => {
									const margin = { top: 20, right: 10, bottom: 40, left: 50 };
									const options = {
										width: 700 - margin.left - margin.right,
										height: 280 - margin.top - margin.bottom,
										data: data
									};
								
									// Initialize chart
									const svg = d3.select('#d3-chart').append('svg')
										.attr('id', 'graph')
										.attr('width', options.width + margin.left + margin.right)
										.attr('height', options.height + margin.top + margin.bottom);
									const focus = svg.append('g')
										.attr('class', 'focus')
										.attr('transform', 'translate(' + margin.left + ', ' + (margin.top) + ')');
									
									// Initialize tooltip
									d3.select('body').append('div')
										.attr('id', 'tooltipPoint')
										.attr('class', 'tooltip')
										.style('opacity', 0);
								
									// Clip path to width of chart element
									svg.append('defs').append('clipPath')
										.attr('id', 'clip')
										.append('rect')
											.attr('width', options.width)
											.attr('height', options.height);
								
									// Create scales
									const xExtent = d3.extent(options.data, (d,i) => d.SampleDate);
									var yMax = d3.max(options.data, d => d.Result); 
									var yBuffered = Math.ceil(yMax + (yMax / 10));
									const xScale = d3.scaleTime()
										.domain(xExtent)
										.range([0, options.width]);
									const yScale = d3.scaleLinear()
										.domain([0, yBuffered])
										.range([options.height, 0]);
								
									// Add axes
									const xAxis = d3.axisBottom()
										.scale(xScale)
										.ticks(5);
									const yAxis = d3.axisLeft()
										.scale(yScale)
										.ticks(5);
									focus.append('g')
										.attr('class', 'x-axis')
										.attr('transform', 'translate(0,' + options.height + ')')
										.style('font-size', '14px')
										.attr('color', '#fff')
										.call(xAxis);
									focus.append('g')
										.attr('class', 'y-axis')
										.style('font-size', '14px')
										.attr('color', '#fff')
										.call(yAxis);
								
									// Draw points
									var points = focus.append('g')
										.attr('clip-path', 'url(#clip)');
									points.selectAll('.circle')
										.data(options.data)
										.enter().append('circle')
										.attr('class', 'circle')
										.attr('r', 4)
										.attr('cx', d => xScale(d.SampleDate))
										.attr('cy', d => yScale(d.Result))
										.attr('fill', '#FFC0CB')
										.style('opacity', 0.9)
										.on('mouseover', (event, d) => {
											// Change style
											d3.select(event.currentTarget).style('fill', '#fff');
											d3.select(event.currentTarget).attr('r', 8);
											// Show tooltip
											d3.select('#tooltipPoint') 
												.transition()
												.duration(50)
												.style('opacity', 1);
											d3.select('#tooltipPoint')
												.html(() => {
													const tooltipDate = d3.timeFormat('%b %e, %Y');
													return '<strong>' + tooltipDate(d.SampleDate) + '</strong><br>' + d['CalculatedResult'].toString() + ' ' + d.Unit;
												})
												.style('left', () => positionTooltipX(event))
												.style('top', () => positionTooltipY(event))
												.style('border-color', '#FFC0CB');
										})
										.on('mouseout', function() {
											d3.select(event.currentTarget).style('fill', '#FFC0CB');
											d3.select(event.currentTarget).attr('r', 4);
											// Hide tooltip
											d3.select('#tooltipPoint') 
												.transition()
												.duration(200)
												.style('opacity', 0);
										})
									points.exit()
										.remove();
								}
								
								const positionTooltipX = (e) => {
									var eventPos = e.pageX; // get mouse position
									var divExtent = document.getElementById('d3-chart').offsetWidth; // get width of container holding chart
									var divOffset = document.getElementById('d3-chart').offsetLeft; // get offset of chart container from left (parent container)
									var tooltipExtent = document.getElementById('tooltipPoint').offsetWidth; // get tooltip div width
									// calculate element position within container
									var relativePos = eventPos - divOffset; 
									if (relativePos <= (divExtent / 2)) {
										// if event is in the left half of chart
										return eventPos + 'px';
									} else {
										// if event is in the right half of chart
										return eventPos - tooltipExtent + 'px';
									}
								}
								
								const positionTooltipY = (e) => {
									var eventPos = e.pageY; // get mouse position
									var divExtent = document.getElementById('d3-chart').offsetHeight; // get height of container holding chart
									var divOffset = document.getElementById('d3-chart').offsetTop; // get offset of chart container from left (parent container)
									var tooltipExtent = document.getElementById('tooltipPoint').offsetHeight; // get tooltip div height
									// calculate element position within container
									var relativePos = eventPos - divOffset; 
									if (relativePos <= (divExtent / 2)) {
										// if event is in the top half of chart
										return eventPos + 'px';
									} else {
										// if event is in the bottom half of chart
										return eventPos - tooltipExtent + 'px';
									}
								}
							</code></pre>
						</div>
					</div>
				</section>

				<!-- Slide 9 - Best use cases -->
				<section class="center" data-background-image="./assets/dawn_wall_nyt.png" data-background-size="cover" style="margin-top: 0.6em">
					<div style="display: flex; flex-direction: column; justify-content: center; text-align: left;">
						<div style="flex: 1; max-width: 45%; font-size: 0.7em">
							<h3>Best use cases</h3>
							<ul class="spaced">
								<li>Unique and highly customized visualizations</li>
								<li>Non-standard interactivity</li>
								<li>Interaction between visualization and user interface</li>
								<li>High performance</li>
								<li>Storytelling</li>
							</ul>
							<p style="margin: 1.6em 0; font-size: 0.9em"><small>Background: <a href="https://www.nytimes.com/interactive/2015/01/09/sports/the-dawn-wall-el-capitan.html" target="_blank">The Dawn Wall</a> - <span style="font-style: italic">The New York Times</span> (2015)</small></p>
						</div>
					</section>
				</section>

				<!-- Slide 10 - Safe to Swim Map -->
				<section class="full">
					<a href="https://www.mywaterquality.ca.gov/safe_to_swim/interactive_map/" target="_blank"><h3>Safe to Swim Map</a> - My Water Quality Portal</h3>
					<iframe data-autoplay width="960" height="580" src="https://www.mywaterquality.ca.gov/safe_to_swim/interactive_map/" frameborder="0"></iframe>
				</section>

				<!-- Slide 11 - NYT 2013 Obama Budget -->
				<section class="full">
					<a href="https://archive.nytimes.com/www.nytimes.com/interactive/2012/02/13/us/politics/2013-budget-proposal-graphic.html" target="_blank"><h3 style="margin-bottom: 0.4em">Four Ways to Slice Obama's 2013 Budget Proposal</a><br> - <span style="font-style: italic">The New York Times</span> (2012)</h3>
					<iframe data-autoplay width="960" height="570" src="https://archive.nytimes.com/www.nytimes.com/interactive/2012/02/13/us/politics/2013-budget-proposal-graphic.html" frameborder="0"></iframe>
				</section>

				<!-- Slide 12 - Deck.gl -->
				<section class="full">
					<a href="https://deck.gl/examples/geojson-layer-paths/" target="_blank"><h3>Highway Safety in the US</a> - deck.gl</h3>
					<iframe data-autoplay width="760" height="580" src="https://deck.gl/examples/geojson-layer-paths/" frameborder="0"></iframe>
				</section>

				<!-- Slide 13 - America's Cup Finale -->
				<section class="full">
					<a href="https://archive.nytimes.com/www.nytimes.com/interactive/2013/09/25/sports/americas-cup-course.html" target="_blank"><h3 style="margin-bottom: 0.4em">The America's Cup Finale: Oracle's Path to Victory</a><br> - <span style="font-style: italic">The New York Times</span> (2013)</h3>
					<iframe data-autoplay width="960" height="580" src="https://archive.nytimes.com/www.nytimes.com/interactive/2013/09/25/sports/americas-cup-course.html" frameborder="0"></iframe>
				</section>

				<!-- Slide 14 - Other languages -->
				<section class="left">
					<h3 style="font-size: 1.4em; margin-bottom: 1em">Other platforms and languages</h3>
					<div style="display: flex; flex-direction: row; justify-content: space-evenly; margin-top: 1.6em;">
						<div style="flex: 1; font-size: 0.7em">
							<h4 style="font-size: 0.9em; margin-bottom: 0.6em">Python</h4>
							<ul>
								<li><a href="https://altair-viz.github.io/" target="_blank">Altair</a>, <a href="https://mpld3.github.io/" target="_blank">mpld3</a>, <a href="https://plotly.com/python/" target="_blank">Plotly Python</a></li>
							</ul>
							<h4 style="font-size: 0.9em; margin-top: 0.8em; margin-bottom: 0.6em">R / R Shiny</h4>
							<ul>
								<li><a href="https://rstudio.github.io/r2d3/" target="_blank">r2d3</a>, <a href="https://ggvis.rstudio.com/">ggvis</a>, <a href="http://ramnathv.github.io/rCharts/" target="_blank">rCharts</a>, <a href="https://plotly-r.com/" target="_blank">Plotly R</a></li>
							</ul>
							<h4 style="font-size: 0.9em; margin-top: 0.8em; margin-bottom: 0.6em">C++</h4>
							<ul>
								<li><a href="https://github.com/devosoft/Empirical" target="_blank">Empirical</a>
							</ul>
						</div>
						<div style="flex: 2; align-self: center; max-width: 550px">
							<figure style="text-align: right;">
								<img style="margin: auto" src="assets/data_viz_abstraction_white.png">
								<a href="https://conlanscientific.com/posts/category/blog/post/use-d3-for-charts-dont-exist-yet/" target="_blank"><figcaption style="text-align: right; margin-top: 0.2em">Conlan Scientific</figcaption></a>
							</figure>
						</div>
					</div>
				</section>

				<!-- Slide 15 - Getting started  -->
				<section class="left">
					<h3 style="font-size: 1.4em">Getting started</h3>
					<div style="display: flex; flex-direction: row">
						<div style="flex: 1; font-size: 0.9em; padding: 0 0.8em 0 0">
							<ul>
								<li>HTML, CSS, JavaScript</li>
								<li>Save frameworks for later</li>
								<li>Resources</li>
									<ul>
										<li><a href="https://developer.mozilla.org/en-US/" target="_blank">Mozilla Developer Network</a></li>
										<li><a href="https://www.freecodecamp.org/" target="_blank">freeCodeCamp</a></li>
										<li><a href="https://alignedleft.com/work/d3-book" target="_blank">Interactive Data Visualization for the Web</a></li>
										<li><a href="https://eloquentjavascript.net/" target="_blank">Eloquent JavaScript</a></li>
									</ul>
							</ul>
						</div>
						<div style="flex: 2; max-width: 340px; text-align: right">
							<figure>
								<img style="margin-right: 20px" src="./assets/murray_book.jpg">
							</figure>
						</div>
					</div>
				</section>
				

				<!-- Slide 16 - Contact  -->
				<section class="center">
					<div class="intro-top" style="margin-bottom: 2em">
						<h3 style="font-size: 1.2em;">Thank you!</h3>
					</div>
					<div class="intro-bottom">
						<p>Slides</p>
						<p><small>
							<a href="https://mmtang.github.io/2021-seminar-series" target="_blank">mmtang.github.io/2021-seminar-series</a><br>
						</small></p>
						<p>Contact</p>
						<p><small>
							<a href="mailto:michelle.tang@waterboards.ca.gov">michelle.tang@waterboards.ca.gov</a><br>
							<a href="https://github.com/mmtang" target="_blank">github.com/mmtang</a>
						</small></p>
						<img class="logo" src="././assets/data_center_logo_white_bg.jpg">
					</div>
				</section>
			</div>
		</div>

		<script src="lib/reveal.js"></script>
		<script src="lib/plugin/notes/notes.js"></script>
		<script src="lib/plugin/markdown/markdown.js"></script>
		<script src="lib/plugin/highlight/highlight.js"></script>
		<script src="https://d3js.org/d3.v6.min.js"></script>
		<script src="lib/venn.js"></script>
		<script src="scripts/venn-diagram.js"></script>
		<script src="scripts/highcharts.js"></script>
		<script src="scripts/d3-chart.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,
				controls: false,
				slideNumber: true,
				center: false,
				progress: false,
				transition: 'none',
				backgroundTransition: 'none',
				margin: 0.02,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});


		</script>
	</body>
</html>
